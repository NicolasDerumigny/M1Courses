\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
 
\usepackage{caption}
%\usepackage{pgfplots}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{footnote}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{url}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{multirow}
\usepackage{amsfonts}
\usepackage[boxed,linesnumbered,noend]{algorithm2e}
\usepackage{qcircuit}
\usepackage{enumerate}

\newtheorem{thm}{Theorem}
\newtheorem{prop}{Propriety}
\newtheorem{lemma}{Lemma}
\newtheorem{defi}{Definition}
\newtheorem{coro}{Corollary}



\setlength{\oddsidemargin}{0pt}
% Marge gauche sur pages impaires
\setlength{\evensidemargin}{0pt}
% Marge gauche sur pages paires
\setlength{\textwidth}{470pt}
% Largeur de la zone de texte 
\setlength{\topmargin}{0pt}
% Pas de marge en haut
\setlength{\headheight}{13pt}
% Haut de page
\setlength{\headsep}{10pt}
% Entre le haut de page et le texte
\setlength{\footskip}{40pt}
% Bas de page + s√©paration
\setlength{\textheight}{630pt}
% Hauteur de la zone de texte

\title{Proofs and Programs}
\author{Phillipe Audebaud \footnote{https://perso.ens-lyon.fr/philippe.audebaud/PnP/}\\
\small ENS de Lyon}
\date{}

\newcommand\subst[2]{\langle #1\big/#2\rangle}

\begin{document}

\maketitle
\tableofcontents
\newpage

\subsection*{Basis}
\begin{itemize}
\item Lecture: Tue 8h-10h (Philippe Audebaud)
\item Tutorial: We 8h-10h (Aurore)
\end{itemize}
10 Weeks of courses (3x3), which is really low.

\[Final\;mark = 50\% \cdot CC + 50\% \cdot Exam\]
No mid-time exam, but weekly homework.

\paragraph{Warning} Presence at the courses and tutorial will have an impact on the marks.

\paragraph{Prerequisites}
\begin{itemize}
\item L2.2 $\to$ Logical (Natacha P., Chapter 1 \& 2): 
\begin{itemize}
\item Proof theory
\item Formal system for logic inference.
\end{itemize}
\item $\lambda$-calculus
\item Category theory
\end{itemize}

\setcounter{section}{0}
\part{(Pure) $\lambda$-Calculus}
\section{Computing with functions ?}
How do we do mathematics ?
\begin{enumerate}[A]
\item Having \emph{structures:} numbers, spaces (points, vectors, functions) $\to$ Eilenberg-Mac Lane ($\sim$ 1942) Category theory
\item Build, explore, transform structures $\to$ Church ($\sim$ 1930) \emph{$\lambda$-Calculus}
\item Compare "stuff": \emph{equality} $\to$ Voevoski ($\sim$ 2006) Algebraic topology $\to$ search HoTT (Hight order Type Theory)
\item Provide a framework (\emph{rules}) to reasoning on all that! $\to$ 1st point
\end{enumerate}


\section{Church $\lambda$-calculus (informally)}
\begin{align*}
f: &A \to B\\
& x \mapsto e
\end{align*}
Given $a\in A$, $f(a)$ is the "replacement of the occurrence of $x$ in $e$ by a"

\begin{align*}
f & \overset{\text{def}}{=} \lambda x.e \tag{$\lambda$-abstraction}\\
f\;a & = (\lambda a.e) \;a \tag{Application}\\
\end{align*}

\paragraph{Notation}
\[e\subst{a}{x}\] is the replacement in $e$ of all the occurrences of $a$ by $x$.

\paragraph{Example}
\begin{enumerate}
\item \begin{align*}
&\lambda x. x\\
&x\mapsto x
\end{align*}
is the identity function
\item \begin{align*}
&\lambda x.y\\
&x\mapsto y
\end{align*}
Here $x$ and $y$ are variables, $x\neq y$. $(\lambda x.y)\; a$ leads to $y\subst{a}{x}\equiv y$

\[ (\lambda x.a) \; b \to_\beta a\subst{b}{x}\]
$\to_\beta$ is a binary relation on lambda-terms $\Rightarrow$ idea of computation on terms.

\end{enumerate}

\paragraph{Notion of $\alpha$-equivalence}
\[\lambda x.a \overset{?}{=}_\alpha \lambda y.b\]
Pick a \emph{fresh} variable, let say $z$,
\[a\subst{z}{x} =_\alpha b\subst{z}{y}\]

\emph{All the results and proofs will be done under the quotient implied by the $\alpha$-equivalence}
\section{A toolbox on $\lambda$-calculus}
Let $\mathcal{X}$ be a measurable set of variables, ranged over by $x,y,z,...$

\begin{defi}
A $\lambda$-term $e$ is generated by the grammar:
\[ a,b,e ... ::= x\in \mathcal{X} \;|\; \lambda x.e \; | \; a \; b\]

The set of $\lambda$-terms is denoted $\Lambda$.
\end{defi}


\begin{defi}[Free variable]
The set of free variables in $e$, denoted $FV(e)$ is defined inductively:
\begin{itemize}
\item if $e\equiv x\in \mathcal{X},\; FV(x)\equiv\{x\}$
\item if $e\equiv \lambda x . a_0, \; FV(\lambda x.a_0) \equiv FV(a_0)\setminus \{x\}$
\item if $e\equiv a_1 \; a_2, \; FV(a_1\;a_2)\equiv FV(a_1) \cup FV(a_2)$
\end{itemize}
A term $e$ is \emph{closed} if $FV(e)=\emptyset$
\end{defi}

\begin{defi}[Substitution]
Given $x \in \mathcal{X}$, $a\in \Lambda$, the substitution of (all the) occurrences of $a$ in $e\in \Lambda$, denoted $e\subst{a}{x}$ is:
\begin{itemize}
\item if $y\in \mathcal{X} \setminus,\; \{x\}, \; y\subst{a}{x}\equiv y $ and $x\subst{a}{x}\equiv a$
\item $(\lambda y.e)\subst{a}{x} = \lambda y.e \subst{a}{x}$
\item $(e\; f)\subst{a}{x} = (e\subst{a}{x})\; f\subst{a}{x} $
\end{itemize}
\end{defi}

\begin{defi}[$\to_\beta$ reduction]
\begin{align*}
\to_\beta & \subseteq \Lambda \times \Lambda\\
& \Big\{ \big( \underbrace{(\lambda x.a)\; b}_{\text{redex}},\underbrace{a\subst{b}{x}}_{\text{contraction}}\big)\big| x\in \mathcal{X},\; a,v \in \Lambda \Big\}
\end{align*}
\end{defi}

\paragraph{Example}
\begin{enumerate}
\item \begin{align*}
(\underbrace{\lambda x. (\lambda y.y)\; a}_{\nrightarrow_\beta (\lambda x.(\lambda y.y))\; b})\; b) \to_\beta ((\lambda y.y)\; a)\;\subst{b}{x} & \equiv ((\lambda y.y)\;\subst{b}{x})a\subst{b}{x}\\
& \equiv (\lambda y.y)\; a\subst{b}{x}
\end{align*}

\item \begin{align*}
(\lambda x.y)\; a \to_\beta y\\
\end{align*}

\item \begin{align*}
(\lambda x.x\; x)(\lambda x.x \;x) \to_\beta & (x\; x)\subst{\lambda x.x \; x}{x} \text{ or } (x\; x)\subst{\lambda y.y \; y}{x}\\
& (\lambda x. x\;x)(\lambda x.x\; x)
\end{align*}
Russell paradox: we get an infinite $\beta$-reduction!
\end{enumerate}

\[\to_\beta \; \subseteq \; \beta_0 \; \subseteq \; \underbrace{\beta}_{\beta-\text{reduction}} = \beta_0^* \]
\[\to_\beta^* \text{ is the $\beta$-reduction, noted } \twoheadrightarrow_\beta \]

\begin{defi}[$\beta_0$-contraction]
Let $a,b\in \Lambda$. $a\; \beta_0 \; b$ is defined by cases:
\begin{itemize}
\item $x\; \beta_0 \; x$
\item $(\lambda x.u)v\; \beta_0 \; u\subst{v}{x}$
\item $(\lambda x.u)\; \beta_0 \; (\lambda x.v)$ if $u\; \beta_0 \; v$
\item $(u\; v)\; \beta_0 \; (u'\; v)$ if $u\;\beta_0\;u'$
\item $(u\; v)\; \beta_0 \; (u\;v')$ if $v\; \beta_0 \; v'$
\end{itemize}
\end{defi}



\end{document}